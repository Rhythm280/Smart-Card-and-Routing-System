package ui;

import dao.PassengerDAO;
import model.Passenger;

import java.awt.*;
import java.awt.event.*;

public class RechargeDialog extends Dialog {
    public RechargeDialog(PassengerDashboard parent, Passenger passenger) {
        super(parent, "Recharge Wallet", true);
        setSize(300, 150);
        setLayout(new GridLayout(3, 2));

        add(new Label("Enter Amount:"));
        TextField amountField = new TextField();
        add(amountField);

        Button rechargeBtn = new Button("Recharge");
        add(rechargeBtn);

        Button cancelBtn = new Button("Cancel");
        add(cancelBtn);

        rechargeBtn.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                try {
                    double amount = Double.parseDouble(amountField.getText());
                    PassengerDAO dao = new PassengerDAO();
                    dao.updateBalance(passenger.getPassengerId(), amount);
                    parent.refreshBalance();
                    dispose();
                } catch (NumberFormatException ex) {
                    System.out.println("Invalid amount entered!");
                }
            }
        });

        cancelBtn.addActionListener(e -> dispose());

        setVisible(true);
    }
}
